{
    "rules": [
        {
            "supported_algorithms": {
                "elasticsearch": [
                    "https://github.com/intrahealth/similarity-scoring"
                ]
            },
            "matchingType": "deterministic",
            "fields": {
                "nid": {
                    "algorithm": "exact",
                    "fhirpath": "identifier.where(system='http://metadata.epts.e-saude.net/dictionary/patient-identifiers/nid-tarv').value",
                    "espath": "nid",
                    "nullHandling": "conservative"
                }
            },
            "potentialMatchThreshold": 1,
	    "autoMatchThreshold": 3,
            "filters": {
                "nid": {
                    "fhirpath": "identifier.where(system='http://metadata.epts.e-saude.net/dictionary/patient-identifiers/nid-tarv').value",
                    "espath": "nid"
                }
            }
        },
        {
            "matchingType": "deterministic",
            "fields": {
                "given": {
		    "algorithm": "jaro-winkler-similarity",
		    "threshold": 0.97,
                    "fhirpath": "name.where(use='official').given",
                    "espath": "given",
                    "nullHandling": "conservative",
                    "nullHandlingBothFields": "greedy"
                },
                "family": {
	            "algorithm": "jaro-winkler-similarity",
                    "threshold": 0.97,
                    "fhirpath": "name.where(use='official').family",
                    "espath": "family",
                    "nullHandling": "conservative",
                    "nullHandlingBothFields": "greedy"
                }
            },
            "potentialMatchThreshold": 2,
            "autoMatchThreshold": 3,
            "filters": {
                "gender": {
                    "fhirpath": "gender",
                    "espath": "gender"
                },
                "birthDate": {
                    "fhirpath": "birthDate",
                    "espath": "birthDate"
                }
            }
        }
    ]
}
